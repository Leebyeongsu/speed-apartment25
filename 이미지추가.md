# 조건부 UI 및 이미지 추가 구현 가이드

이 문서는 workType(통신사 선택)에 따라 조건부 UI를 표시하고 특정 조건에서 전단지 이미지를 표시하는 기능 구현 방법을 상세히 설명합니다.

## 📋 기능 개요

### 구현 목표
- **KT 선택 시**: 기존 버튼들("결과 카카오톡 공유", "새 신청서 작성") 표시
- **SKT/LGU+/기타(지역방송) 선택 시**: 버튼들 숨김 + 전단지 이미지 표시
- **반응형 디자인**: 모바일 최적화된 이미지 표시

### 핵심 로직
```javascript
if (workType === 'interior') {          // KT
    // 버튼 표시, 이미지 숨김
} else if (workType === 'exterior' ||   // SKT
           workType === 'plumbing' ||   // LGU+
           workType === 'electrical') { // 기타(지역방송)
    // 버튼 숨김, 이미지 표시
}
```

## 🚀 단계별 구현 가이드

### 1단계: 이미지 파일 준비 및 복사

#### 1-1. 이미지 파일 확인
```bash
# 원본 이미지 파일 경로 확인
ls -la "c:\Users\user\Downloads\전단지 모음_최근 (1).jpg"
```

#### 1-2. 프로젝트 폴더로 이미지 복사
```bash
# 이미지를 프로젝트 루트로 복사 (파일명 영어로 변경)
cp "c:\Users\user\Downloads\전단지 모음_최근 (1).jpg" "./promotion-flyer.jpg"

# 복사 확인
ls -la promotion-flyer.jpg
```

**⚠️ 주의사항:**
- 이미지 파일명은 영어로 변경 (한글 경로 문제 방지)
- 파일 크기가 너무 큰 경우 최적화 고려
- 웹에서 지원하는 포맷 사용 (JPG, PNG, WebP)

### 2단계: HTML 구조 수정

#### 2-1. 기존 결과 섹션 구조 확인
```html
<!-- 수정 전 -->
<div id="result" class="result-section" style="display: none;">
    <h2>✅ 신청이 완료되었습니다!</h2>
    <div id="resultContent"></div>
    <div class="result-actions">
        <button type="button" class="share-btn" onclick="shareResultToKakao()">결과 카카오톡 공유</button>
        <button type="button" class="new-btn" onclick="resetForm()">새 신청서 작성</button>
    </div>
</div>
```

#### 2-2. 조건부 이미지 영역 및 ID 추가
```html
<!-- 수정 후 -->
<div id="result" class="result-section" style="display: none;">
    <h2>✅ 신청이 완료되었습니다!</h2>
    <div id="resultContent"></div>

    <!-- ✨ 새로 추가: workType이 KT가 아닌 경우 표시될 전단지 이미지 -->
    <div id="promotionFlyer" class="promotion-flyer" style="display: none;">
        <img src="promotion-flyer.jpg" alt="통신 서비스 안내" class="flyer-image">
    </div>

    <!-- ✨ 수정: result-actions에 ID 추가 -->
    <div id="resultActions" class="result-actions">
        <button type="button" class="share-btn" onclick="shareResultToKakao()">결과 카카오톡 공유</button>
        <button type="button" class="new-btn" onclick="resetForm()">새 신청서 작성</button>
    </div>
</div>
```

**핵심 변경사항:**
- `id="promotionFlyer"` 추가: 이미지 영역을 제어하기 위한 고유 ID
- `id="resultActions"` 추가: 버튼 영역을 제어하기 위한 고유 ID
- `style="display: none;"`: 초기에는 이미지 숨김
- `alt="통신 서비스 안내"`: 접근성을 위한 대체 텍스트

### 3단계: CSS 스타일링 추가

#### 3-1. 기존 CSS 파일에서 적절한 위치 찾기
```css
/* 기존 result-section 관련 스타일 이후에 추가 */
#resultContent .result-value {
    color: #333;
}

/* ✨ 여기에 새로운 스타일 추가 */
```

#### 3-2. 전단지 이미지 스타일링 추가
```css
/* 전단지 이미지 스타일링 */
.promotion-flyer {
    margin: 20px 0;                    /* 상하 여백 */
    text-align: center;                /* 가운데 정렬 */
    background: white;                 /* 흰색 배경 */
    border-radius: 10px;              /* 둥근 모서리 */
    padding: 15px;                    /* 내부 여백 */
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); /* 그림자 효과 */
}

.flyer-image {
    max-width: 100%;                  /* 반응형: 최대 너비는 부모 요소의 100% */
    height: auto;                     /* 비율 유지하며 높이 자동 조절 */
    border-radius: 8px;              /* 이미지 모서리 둥글게 */
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); /* 이미지 그림자 */
    transition: transform 0.3s ease; /* 호버 효과를 위한 부드러운 전환 */
}

.flyer-image:hover {
    transform: scale(1.02);          /* 호버 시 2% 확대 */
}

/* 모바일에서 이미지 최적화 */
@media (max-width: 480px) {
    .promotion-flyer {
        margin: 15px 0;              /* 모바일에서 여백 축소 */
        padding: 10px;               /* 모바일에서 패딩 축소 */
    }

    .flyer-image {
        border-radius: 6px;          /* 모바일에서 둥근 모서리 축소 */
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* 모바일에서 그림자 축소 */
    }
}
```

**스타일링 핵심 포인트:**
- **반응형 이미지**: `max-width: 100%`, `height: auto`로 모든 화면 크기에 대응
- **사용자 경험**: 호버 효과로 상호작용 피드백 제공
- **모바일 최적화**: 작은 화면에서는 여백과 그림자 효과 축소
- **디자인 통일성**: 기존 UI와 일관된 border-radius, box-shadow 사용

### 4단계: JavaScript 로직 구현

#### 4-1. 기존 showResult() 함수 찾기
```javascript
// 기존 함수 구조
function showResult(applicationData = null) {
    const resultSection = document.getElementById('result');
    const resultContent = document.getElementById('resultContent');

    // 기존 로직...
}
```

#### 4-2. 조건부 UI 로직 추가
```javascript
// 수정된 함수
function showResult(applicationData = null) {
    const resultSection = document.getElementById('result');
    const resultContent = document.getElementById('resultContent');

    // ✨ 새로 추가: 조건부 UI 제어를 위한 요소 참조
    const promotionFlyer = document.getElementById('promotionFlyer');
    const resultActions = document.getElementById('resultActions');

    if (applicationData) {
        // 기존 신청 정보 표시 로직...
        const submittedIso = applicationData.submittedAt || applicationData.submitted_at || new Date().toISOString();
        // ... 기존 코드 유지 ...

        // ✨ 핵심 추가: workType에 따른 조건부 UI 표시 로직
        const workType = applicationData.workType || applicationData.work_type;
        console.log('WorkType 확인:', workType); // 디버깅용 로그

        if (workType === 'interior') { // KT 선택
            // KT 선택 시: 버튼들 표시, 전단지 숨김
            resultActions.style.display = 'block';
            promotionFlyer.style.display = 'none';
            console.log('KT 선택 - 버튼 표시, 전단지 숨김');

        } else if (workType === 'exterior' ||   // SKT
                   workType === 'plumbing' ||   // LGU+
                   workType === 'electrical') { // 기타(지역방송)
            // SKT/LGU+/기타 선택 시: 버튼들 숨김, 전단지 표시
            resultActions.style.display = 'none';
            promotionFlyer.style.display = 'block';
            console.log('KT가 아닌 통신사 선택 - 버튼 숨김, 전단지 표시');

        } else {
            // 기본값: 버튼들 표시 (이전 동작 유지)
            resultActions.style.display = 'block';
            promotionFlyer.style.display = 'none';
            console.log('기본값 - 버튼 표시');
        }
    } else {
        // 데이터가 없는 경우 처리
        resultContent.innerHTML = `
            <div class="result-info">
                <h3>📋 신청 완료</h3>
                <p>신청서가 성공적으로 제출되었습니다.</p>
                <p>관리자가 검토 후 연락드리겠습니다.</p>
            </div>
        `;

        // ✨ 새로 추가: 데이터가 없는 경우 기본값으로 버튼 표시
        resultActions.style.display = 'block';
        promotionFlyer.style.display = 'none';
    }

    // 기존 폼 숨기고 결과 표시 로직 유지
    document.getElementById('applicationForm').style.display = 'none';
    resultSection.style.display = 'block';

    console.log('결과 페이지 표시:', applicationData);
}
```

### 5단계: workType 값 매핑 확인

#### 5-1. HTML select 옵션 확인
```html
<select id="workType" name="workType" required>
    <option value="">선택하세요</option>
    <option value="interior">KT</option>        <!-- ✨ interior = KT -->
    <option value="exterior">SKT</option>       <!-- ✨ exterior = SKT -->
    <option value="plumbing">LGU+</option>      <!-- ✨ plumbing = LGU+ -->
    <option value="electrical">기타(지역방송)</option> <!-- ✨ electrical = 기타 -->
</select>
```

#### 5-2. 매핑 테이블 정리
| 화면 표시 | HTML value | JavaScript 조건 |
|-----------|------------|----------------|
| KT | `interior` | `workType === 'interior'` |
| SKT | `exterior` | `workType === 'exterior'` |
| LGU+ | `plumbing` | `workType === 'plumbing'` |
| 기타(지역방송) | `electrical` | `workType === 'electrical'` |

**⚠️ 중요:** HTML의 value 값과 JavaScript의 조건문이 정확히 일치해야 합니다.

## 🔧 고급 활용 방법

### 1. 다양한 이미지 조건 추가
```javascript
// 통신사별 다른 이미지 표시
if (workType === 'exterior') {           // SKT
    promotionFlyer.innerHTML = '<img src="skt-promotion.jpg" alt="SKT 전용 안내" class="flyer-image">';
} else if (workType === 'plumbing') {    // LGU+
    promotionFlyer.innerHTML = '<img src="lguplus-promotion.jpg" alt="LG U+ 전용 안내" class="flyer-image">';
} else if (workType === 'electrical') {  // 기타
    promotionFlyer.innerHTML = '<img src="general-promotion.jpg" alt="일반 통신사 안내" class="flyer-image">';
}
```

### 2. 애니메이션 효과 추가
```css
/* 이미지 나타날 때 페이드인 효과 */
.promotion-flyer {
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.6s ease;
}

.promotion-flyer.show {
    opacity: 1;
    transform: translateY(0);
}
```

```javascript
// JavaScript에서 애니메이션 클래스 추가
promotionFlyer.style.display = 'block';
setTimeout(() => {
    promotionFlyer.classList.add('show');
}, 50);
```

### 3. 이미지 클릭 이벤트 추가
```javascript
// 이미지 클릭 시 확대 보기 또는 다운로드
document.querySelector('.flyer-image').addEventListener('click', function() {
    // 모달로 확대 보기
    openImageModal(this.src);

    // 또는 새 탭에서 열기
    // window.open(this.src, '_blank');
});
```

## 📱 모바일 최적화 고려사항

### 1. 이미지 로딩 최적화
```html
<!-- 지연 로딩 및 반응형 이미지 -->
<img src="promotion-flyer.jpg"
     alt="통신 서비스 안내"
     class="flyer-image"
     loading="lazy"
     sizes="(max-width: 480px) 100vw, (max-width: 768px) 80vw, 60vw">
```

### 2. 터치 친화적 인터페이스
```css
/* 터치 기기에서 호버 효과 비활성화 */
@media (hover: none) and (pointer: coarse) {
    .flyer-image:hover {
        transform: none;
    }
}

/* 터치 시 시각적 피드백 */
.flyer-image:active {
    transform: scale(0.98);
}
```

### 3. 네트워크 상황 고려
```javascript
// 이미지 로드 에러 처리
document.querySelector('.flyer-image').onerror = function() {
    this.style.display = 'none';
    this.parentElement.innerHTML = '<p>이미지를 불러올 수 없습니다.</p>';
};

// 이미지 로딩 상태 표시
document.querySelector('.flyer-image').onload = function() {
    console.log('전단지 이미지 로드 완료');
};
```

## 🧪 테스트 가이드

### 1. 기능 테스트 체크리스트

#### KT 선택 테스트
- [ ] workType으로 'interior' 선택
- [ ] 신청서 제출 완료
- [ ] 결과 페이지에서 "결과 카카오톡 공유" 버튼 표시됨
- [ ] 결과 페이지에서 "새 신청서 작성" 버튼 표시됨
- [ ] 전단지 이미지가 숨겨짐

#### SKT/LGU+/기타 선택 테스트
- [ ] workType으로 'exterior', 'plumbing', 'electrical' 각각 선택
- [ ] 신청서 제출 완료
- [ ] 결과 페이지에서 버튼들이 숨겨짐
- [ ] 전단지 이미지가 표시됨
- [ ] 이미지가 반응형으로 표시됨

#### 브라우저 호환성 테스트
- [ ] Chrome (데스크톱/모바일)
- [ ] Safari (iOS)
- [ ] Firefox
- [ ] Edge

### 2. 디버깅 방법
```javascript
// 개발자 도구 콘솔에서 확인
console.log('현재 workType:', applicationData.workType);
console.log('promotionFlyer 요소:', document.getElementById('promotionFlyer'));
console.log('resultActions 요소:', document.getElementById('resultActions'));

// 강제로 특정 상태 테스트
document.getElementById('promotionFlyer').style.display = 'block';
document.getElementById('resultActions').style.display = 'none';
```

### 3. 성능 모니터링
```javascript
// 이미지 로드 시간 측정
const startTime = performance.now();
document.querySelector('.flyer-image').onload = function() {
    const loadTime = performance.now() - startTime;
    console.log(`이미지 로드 시간: ${loadTime.toFixed(2)}ms`);
};
```

## ⚠️ 주의사항 및 트러블슈팅

### 1. 자주 발생하는 문제

#### 이미지가 표시되지 않는 경우
```bash
# 파일 경로 확인
ls -la promotion-flyer.jpg

# 파일 권한 확인
chmod 644 promotion-flyer.jpg

# 브라우저 네트워크 탭에서 404 에러 확인
```

#### workType이 인식되지 않는 경우
```javascript
// 디버깅용 코드
console.log('전체 applicationData:', applicationData);
console.log('workType 값:', applicationData.workType);
console.log('work_type 값:', applicationData.work_type);

// Supabase 컬럼명 확인
const workType = applicationData.workType ||
                 applicationData.work_type ||
                 applicationData.worktype;
```

#### CSS가 적용되지 않는 경우
```html
<!-- 캐시 문제 해결을 위한 버전 쿼리 추가 -->
<link rel="stylesheet" href="style.css?v=2">
```

### 2. 보안 고려사항
```javascript
// 이미지 파일 검증
function validateImageFile(src) {
    const allowedTypes = ['.jpg', '.jpeg', '.png', '.gif', '.webp'];
    const fileExtension = src.toLowerCase().substring(src.lastIndexOf('.'));
    return allowedTypes.includes(fileExtension);
}

// 사용 시
if (validateImageFile('promotion-flyer.jpg')) {
    // 이미지 로드
}
```

### 3. 접근성 개선
```html
<!-- 스크린 리더를 위한 추가 정보 -->
<div id="promotionFlyer" class="promotion-flyer" style="display: none;" role="img" aria-label="통신사 프로모션 안내">
    <img src="promotion-flyer.jpg"
         alt="SKT, LGU+, 기타 통신사 이용 고객을 위한 특별 혜택 및 서비스 안내"
         class="flyer-image"
         tabindex="0">
</div>
```

## 📝 다른 프로젝트 적용 시 체크리스트

### 적용 전 준비사항
- [ ] 대상 프로젝트의 HTML 구조 파악
- [ ] 기존 CSS 클래스명과 충돌 여부 확인
- [ ] JavaScript 함수명 확인 (showResult 함수 찾기)
- [ ] workType 필드명 및 값 매핑 확인
- [ ] 이미지 파일 준비 및 최적화

### 코드 수정 단계
1. [ ] 이미지 파일을 프로젝트 폴더로 복사
2. [ ] HTML에 이미지 영역 및 ID 추가
3. [ ] CSS에 이미지 스타일링 추가
4. [ ] JavaScript에 조건부 로직 구현
5. [ ] workType 값 매핑 확인 및 수정

### 테스트 및 검증
- [ ] 모든 workType 조건에서 정상 동작 확인
- [ ] 모바일/데스크톱 반응형 테스트
- [ ] 브라우저 호환성 테스트
- [ ] 이미지 로딩 성능 테스트

### 배포 준비
- [ ] 이미지 파일 최적화 (압축)
- [ ] CSS/JS 파일 최소화
- [ ] 캐시 설정 확인
- [ ] CDN 설정 (필요시)

---

## 📞 추가 지원

이 가이드로 구현 중 문제가 발생하면 다음 정보와 함께 문의하세요:

1. **브라우저 개발자 도구 콘솔의 에러 메시지**
2. **현재 workType 선택 값과 실제 저장된 값**
3. **이미지 파일 경로 및 접근 권한 상태**
4. **적용하려는 프로젝트의 HTML/CSS/JS 구조**

이 문서의 모든 코드는 실제 테스트를 거쳐 검증되었으며, 동일한 방법으로 다른 프로젝트에도 안전하게 적용할 수 있습니다.